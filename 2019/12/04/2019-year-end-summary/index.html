<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>2019 年的收获与成长 | 萤火之森</title><meta name="keywords" content="游戏开发"><meta name="author" content="猫冬"><meta name="copyright" content="猫冬"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="今年发生了很多事情，博客也因此从七月停更到了现在，实在惭愧…现在趁着年终，赶紧抓住 2019 年的尾巴了，来总结下我的这一年。 本文真的会很啰嗦，但是希望能帮到希望用 Unity 恰饭或者其他技术恰饭的同学。">
<meta property="og:type" content="article">
<meta property="og:title" content="2019 年的收获与成长">
<meta property="og:url" content="http://frankorz.com/2019/12/04/2019-year-end-summary/index.html">
<meta property="og:site_name" content="萤火之森">
<meta property="og:description" content="今年发生了很多事情，博客也因此从七月停更到了现在，实在惭愧…现在趁着年终，赶紧抓住 2019 年的尾巴了，来总结下我的这一年。 本文真的会很啰嗦，但是希望能帮到希望用 Unity 恰饭或者其他技术恰饭的同学。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgs2019-year-end-summary.gif">
<meta property="article:published_time" content="2019-12-04T10:50:18.000Z">
<meta property="article:modified_time" content="2022-02-13T09:36:37.727Z">
<meta property="article:author" content="猫冬">
<meta property="article:tag" content="游戏开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgs2019-year-end-summary.gif"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsfavicon.png"><link rel="canonical" href="http://frankorz.com/2019/12/04/2019-year-end-summary/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?91a6af339098c7b3314fd48d6640bbf8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-69634396-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-69634396-1');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '2019 年的收获与成长',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-13 09:36:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="萤火之森" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgshead.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.notion.so/frankorz/e9a64743c07743f08605f5df7cb57eaf"><i class="fa-fw far fa-sticky-note"></i><span> 公开笔记</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书籍</span></a></div><div class="menus_item"><a class="site-page" href="/pixel-art/"><i class="fa-fw fas fa-palette"></i><span> 像素画</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgs2019-year-end-summary.gif')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">萤火之森</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.notion.so/frankorz/e9a64743c07743f08605f5df7cb57eaf"><i class="fa-fw far fa-sticky-note"></i><span> 公开笔记</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书籍</span></a></div><div class="menus_item"><a class="site-page" href="/pixel-art/"><i class="fa-fw fas fa-palette"></i><span> 像素画</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">2019 年的收获与成长</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-12-04T10:50:18.000Z" title="发表于 2019-12-04 10:50:18">2019-12-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-13T09:36:37.727Z" title="更新于 2022-02-13 09:36:37">2022-02-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Unity/">Unity</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>18分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="2019 年的收获与成长"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>今年发生了很多事情，博客也因此从七月停更到了现在，实在惭愧…现在趁着年终，赶紧抓住 2019 年的尾巴了，来总结下我的这一年。</p>
<p>本文真的会很啰嗦，但是希望能帮到希望用 Unity 恰饭或者其他技术恰饭的同学。</p>
<span id="more"></span>
<h1>毕业</h1>
<p>今年的上半年完成了研究生的学业，结束了留学生涯。</p>
<p>我的专业课程比较松，总共两年要修 16 节课的学分，但是必修课只有四节，因此我可以尽可能的选择有实战的课程。这边课程的大作业大多需要团队协作，但是有些 IT 研究生同学是跨专业过来的，不是很能写代码，所以有时候挺考验自身能力的（笑。 我组完队一般都希望能把大作业的规模做大些，一方面是作业能拿比较好的分数，另一方面是求职的时候可以拿出能往简历上放的项目经验。</p>
<p>毕业后我发现这种选择是对的，我的队友在毕业后还问我们的线上项目怎么开不起来了，他们也到了找工作的时间，还让我帮忙看了看简历。澳洲工作是很休闲的，大部分下午五六点就能下班。身边同学也在努力地留下来，考 PTE、CCL 考试凑分拿 PR。自己因为还是想做游戏，澳洲环境不太好，就回了国。</p>
<h1>从面试到工作</h1>
<p>由于课程结束三个月后才能参加毕业典礼拿到毕业证，当时我对求职还不太上心，还想等着春招。但是又不想在家里混吃混喝，就开始每天刷刷面试题，学学感兴趣的，同时也开始在某直聘找工作，打算每周面试一次，接触下当前的就业形势，同时查漏补缺。</p>
<h2 id="第一周">第一周</h2>
<p>第一周面试了家一百多人的游戏公司，一上来要求三十分钟解一道 Leetcode hard 的题…好不容易解出来了，又要求递归改迭代，又问有没有能优化的点。之后还问了些逻辑题，这时候挺庆幸自己复习了<a target="_blank" rel="noopener" href="https://book.douban.com/subject/25753386/">《程序员面试经典（第5版）》</a>（<a target="_blank" rel="noopener" href="https://www.ituring.com.cn/book/1876">第六版</a>刚出噢），基本还能 hold 住场面，但是后来分析算法的时间复杂度分析的十分糟糕，于是就没有然后了…</p>
<p>当天十分沮丧，恰巧面试的地方和一个主美朋友工作的地方很接近，就约了个饭。他开导我说：”拿美术来说，不同公司也会需要不同的美术：古风游戏自然需求专精画古风的，科幻游戏需求的美术风格很明显也不一样。再面试几家就好，今天面试只代表公司不适合你。“我听了很有道理！于是继续不务正业学了喜欢的东西，简单复习复习算法，刷了刷题。</p>
<h2 id="第二周">第二周</h2>
<p>第二周又接到另一个游戏公司 HR 的面试邀请，面试时直接来了三个面试官，两个程序大佬一个制作人。很明显的，面试风格都不一样。他们事先看了我的简历，看了我的博客。刚好第一周的时候更新了一篇 <a href="http://frankorz.com/2019/07/14/clarify-ecs-basic-concept/">DOTS 的博文</a>，于是他们一开始就让我介绍下 Unity 的 DOTS 技术栈是什么，还有一些概念细节。后来的其他问题很明显能感觉他们在考察我知识的广度，例如图形学，我简历上提到的 C# 热更新等。</p>
<p>刚好那段时间”不务正业“地跟着<a target="_blank" rel="noopener" href="https://book.douban.com/subject/30348061/">《自己动手实现Lua》</a>写了一半的 Lua 虚拟机，于是问到对 Lua 是否熟悉的时候，我就提了一嘴最近在学的东西，接着又展开新的问答。整个过程中，我觉得面试官的风格和第一周公司的面试风格完全不一样，但是有些地方还是答得不够好，于是又在家瞎学。</p>
<p>一周后，我拿到第二家公司的 Offer，成为了公司工具人。</p>
<p>我觉得从面试就能看出公司关注的是开发人员的哪些方面，如主美朋友所说，如果不愿意改变自己学习的风格，那就找到需求这种风格的公司，接下来的工作也印证了这一点。</p>
<h2 id="上面提到的内容">上面提到的内容</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/34813624/">《程序员面试经典（第6版）》</a>（<a target="_blank" rel="noopener" href="https://book.douban.com/subject/25753386/">第5版</a>）</li>
<li>DOTS 相关博文<a href="http://frankorz.com/2019/07/14/clarify-ecs-basic-concept/">《洞明 Unity ECS 基础概念》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30348061/">《自己动手实现Lua：虚拟机、编译器和标准库》</a>，用Go语言实现 Lua 虚拟机、编译器和标准库。</li>
</ul>
<h1>了解代码的另一面</h1>
<p>入职后，才发现公司写了一套自己的 C# 热更新，这种热更新是和 xLua 一样的注入式热更，跟 <a target="_blank" rel="noopener" href="https://github.com/egametang/ET">ET 框架</a>分两个项目跑的还不一样（下文会解释）。有意思的是，在我入职过了几个月后，xLua 作者也开源了C# 注入式的热更新项目：<a target="_blank" rel="noopener" href="https://github.com/Tencent/InjectFix">InjectFix</a>，作者还配套写了一套 IL 的运行时，听说性能还比 ILRuntime 更好些。</p>
<p>感兴趣的可以先看看 xLua 作者的讲解：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/54344452/answer/139413144">如何评价腾讯在Unity下的xLua（开源）热更方案？</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/345639690/answer/825301379">作为游戏开发者，如何看待腾讯最新发布的Unity热修复工具InjectFix？</a></li>
</ul>
<p>先前基于 ILRuntime 的热更新，例如 ET 框架，大多是分两个项目，主项目和热更项目，热更项目放一些需要经常修改的战斗逻辑、UI 界面等。这样可以直接把热更项目都放在 ILRuntime 上跑，整个项目都能热更，十分方便，但是这样十分依赖 ILRuntime 的性能。</p>
<p>那么注入式的热更有什么区别呢？我们给每个函数前加 if 判断，如果 ILRuntime 上跑的（能热更的）DLL里面有对应的方法，就执行热更的方法，这样 ILRuntime 的性能问题也能避免开来，因为我们可能只有需要热更的函数在 ILRuntime 上面跑，而不是整个项目。</p>
<blockquote>
<p>那么，古尔丹，代价是什么呢？<br>
——格罗玛什·地狱咆哮</p>
</blockquote>
<p>代价就是能热更的东西极其局限，只能热更函数、和新增的类等。</p>
<p>在了解原因之前，我们先来看看例子，假设我们游戏就这么多代码：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Unity 2019.2 之前，Scripting Runtime Version: .Net 3.5 Equivalent(Deprecated)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestIL</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        Action action = () =&gt; Debug.Log(<span class="string">&quot;Hello IL&quot;</span>);</span><br><span class="line">        action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面是看上去如古天乐平平无奇的代码，当我们用 <a target="_blank" rel="noopener" href="https://github.com/0xd4d/dnSpy">dnSpy</a> 反编译 <code>Library\ScriptAssemblies\Assembly-CSharp.dll</code> 后会发现：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestIL</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">int</span>[] array = <span class="keyword">new</span> <span class="built_in">int</span>[]</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">		&#125;;</span><br><span class="line">		Action action = <span class="built_in">delegate</span>()</span><br><span class="line">		&#123;</span><br><span class="line">			Debug.Log(<span class="string">&quot;Hello IL&quot;</span>);</span><br><span class="line">		&#125;;</span><br><span class="line">		action();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 编译器生成的匿名函数</span></span><br><span class="line">	[<span class="meta">CompilerGenerated</span>]</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> &lt;Start&gt;m__0()</span><br><span class="line">	&#123;</span><br><span class="line">		Debug.Log(<span class="string">&quot;Hello IL&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	[<span class="meta">CompilerGenerated</span>]</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Action &lt;&gt;f__am$cache0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译器为我们的 Action 生成了匿名函数，那也就是说如果我需要更改 Debug.Log 中打印的字符串，我只需在热更 DLL 中提供：<strong>修改后的函数</strong> + <strong>编译器生成的匿名函数</strong>就 okay 了？实际上没那么简单，因为编译器又作妖了。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    Action action = () =&gt; Debug.Log(<span class="string">&quot;Hello &quot;</span> + arr[<span class="number">0</span>]); <span class="comment">// 修改打印</span></span><br><span class="line">    action();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次查看反编译后的 DLL：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">int</span>[] arr = <span class="keyword">new</span> <span class="built_in">int</span>[]</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">	&#125;;</span><br><span class="line">	Action action = <span class="built_in">delegate</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		Debug.Log(<span class="string">&quot;Hello &quot;</span> + arr[<span class="number">0</span>]);</span><br><span class="line">	&#125;;</span><br><span class="line">	action();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">CompilerGenerated</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">sealed</span> <span class="keyword">class</span> &lt;<span class="title">Start</span>&gt;<span class="title">c__AnonStorey0</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">public</span> &lt;Start&gt;c__AnonStorey0()</span><br><span class="line">	&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">internal</span> <span class="keyword">void</span> &lt;&gt;m__0()</span><br><span class="line">	&#123;</span><br><span class="line">		Debug.Log(<span class="string">&quot;Hello &quot;</span> + <span class="keyword">this</span>.arr[<span class="number">0</span>]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">internal</span> <span class="built_in">int</span>[] arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于 action 中引用了局部变量，mono 编译器将本该生成的匿名方法生成了匿名类，并在调用的时候传入 arr int 数组。</p>
<p>现在我们调整下我们的热更新策略：如果我们检测到编译器生成的匿名函数，将其转换成匿名类，再把这个新增的类复制到热更 DLL 中。</p>
<p>还是有问题！</p>
<p>这时候就需要认识 C# 的中间语言—— MSIL（又称 IL），每句 C# 代码都可以转换成<strong>可读性较好</strong>的<strong>类似于机器代码</strong>的 IL 代码。</p>
<p>当我们查看 Start 函数的 IL 代码时：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">.<span class="function">method <span class="keyword">private</span> hidebysig </span></span><br><span class="line"><span class="function">	instance <span class="keyword">void</span> <span class="title">Start</span> () cil managed</span> </span><br><span class="line">&#123;</span><br><span class="line">	.maxstack <span class="number">4</span></span><br><span class="line">	.<span class="function">locals <span class="title">init</span> (<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">		[<span class="number">0</span>] <span class="keyword">class</span> TestIL/<span class="string">&#x27;&lt;Start&gt;c__AnonStorey0&#x27;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">		[<span class="number">1</span>] <span class="keyword">class</span> [System.Core]System.Action</span></span></span><br><span class="line"><span class="params"><span class="function">	</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">	IL_0000: newobj    instance <span class="keyword">void</span> TestIL/&#x27;&lt;Start&gt;c__AnonStorey0&#x27;::.<span class="title">ctor</span>()</span></span><br><span class="line"><span class="function">	IL_0005: stloc.0</span></span><br><span class="line"><span class="function">	IL_0006: nop</span></span><br><span class="line"><span class="function">	IL_0007: ldloc.0</span></span><br><span class="line"><span class="function">	IL_0008: ldc.i4.4</span></span><br><span class="line"><span class="function">	IL_0009: newarr    [mscorlib]System.Int32</span></span><br><span class="line"><span class="function">	IL_000E: dup       <span class="comment">// 下面这串是什么？怎么又引用了另外一个类？</span></span></span><br><span class="line"><span class="function">	IL_000F: ldtoken   field valuetype &#x27;&lt;PrivateImplementationDetails&gt;&#x27;/&#x27;$ArrayType</span>=<span class="number">16&#x27;</span> <span class="string">&#x27;&lt;PrivateImplementationDetails&gt;&#x27;</span>::<span class="string">&#x27;$field-1456763F890A84558F99AFA687C36B9037697848&#x27;</span></span><br><span class="line">	IL_0014: call      <span class="keyword">void</span> [mscorlib]System.Runtime.CompilerServices.RuntimeHelpers::InitializeArray(<span class="keyword">class</span> [<span class="title">mscorlib</span>]<span class="title">System.Array</span>, <span class="title">valuetype</span> [<span class="title">mscorlib</span>]<span class="title">System.RuntimeFieldHandle</span>)</span><br><span class="line">	<span class="title">IL_0019</span>: <span class="title">stfld</span>     <span class="title">int32</span>[] <span class="title">TestIL</span>/&#x27;&lt;<span class="title">Start</span>&gt;<span class="title">c__AnonStorey0</span>&#x27;::<span class="title">arr</span></span><br><span class="line">	<span class="title">IL_001E</span>: <span class="title">ldloc.0</span></span><br><span class="line">	<span class="title">IL_001F</span>: <span class="title">ldftn</span>     <span class="title">instance</span> <span class="title">void</span> <span class="title">TestIL</span>/&#x27;&lt;<span class="title">Start</span>&gt;<span class="title">c__AnonStorey0</span>&#x27;::&#x27;&lt;&gt;<span class="title">m__0</span>&#x27;()</span><br><span class="line">	<span class="title">IL_0025</span>: <span class="title">newobj</span>    <span class="title">instance</span> <span class="title">void</span> [<span class="title">System.Core</span>]<span class="title">System.Action</span>::.<span class="title">ctor</span>(<span class="title">object</span>, <span class="title">native</span> <span class="title">int</span>)</span><br><span class="line">	<span class="title">IL_002A</span>: <span class="title">stloc.1</span></span><br><span class="line">	<span class="title">IL_002B</span>: <span class="title">ldloc.1</span></span><br><span class="line">	<span class="title">IL_002C</span>: <span class="title">callvirt</span>  <span class="title">instance</span> <span class="title">void</span> [<span class="title">System.Core</span>]<span class="title">System.Action</span>::<span class="title">Invoke</span>()</span><br><span class="line">	<span class="title">IL_0031</span>: <span class="title">ret</span></span><br><span class="line">&#125; <span class="comment">// end of method TestIL::Start</span></span><br></pre></td></tr></table></figure>
<p>在 dnSpy 中找了找，发现了 <code>PrivateImplementationDetails</code> 类：</p>
<p><img src="http://img.frankorz.com/dnspy.png" alt="dnspy"></p>
<p>这看起来应该是这个数组被存到了某个地方，这个类只是提供了 id 告诉 IL 这个数组应该在哪找？通过查询 <a target="_blank" rel="noopener" href="https://github.com/dotnet/roslyn/blob/master/src/Compilers/Core/Portable/CodeGen/PrivateImplementationDetails.cs">Roslyn 编译器的文档</a>，发现了这个类的注释：”The main purpose of this class so far is to contain mapped fields and their types.“ 所以我们要热更的话，还需要将 <code>PrivateImplementationDetails</code> 类复制到热更 DLL 中。</p>
<p>我们怎么分析代码是否是匿名函数呢？<a target="_blank" rel="noopener" href="https://github.com/jbevain/cecil">Mono.Cecil</a> 就是一套基于 IL 分析程序集的库，我们可以通过这个库来判断哪些方法不能热更等，这又是另外一个话题，略过不提。</p>
<p>以上只是注入热更的一个小插曲，但是涉及的东西就已经与一开始 Start 方法中的三行代码相去甚远了。如果我们还要支持重载函数的热更，泛型类中函数的热更，就更是让人掉头发的话题，涉及的 IL 十分复杂。</p>
<p>现代的高级语言为我们封装了太多东西，提供了方便编程的语法糖，但也为我们知根知底的学习方式设立了门槛。</p>
<p>但是当我们了解了 IL 中间语言的话，我们以后面对”在匿名函数引用 for 循环中变量的行为会诡异“等问题的时候，我们可以直接反编译 DLL 来看代码真正的面目是怎么样的。</p>
<p>不小心写了足以充当一篇文章的内容，但是我想表达的是：</p>
<ul>
<li>对于游戏开发者，我们有必要对自己的代码做了什么有充分的了解，谨慎运用语法糖，这样才能充分掌握游戏的性能。</li>
<li>虽说我们远远没达到造 InjectFix 轮子的程度，但是了解该技术的根基——IL，再尝试根据其他文档来分析，能让我们更好的了解这个框架的背后，了解这种热更新的优缺点。</li>
</ul>
<h2 id="上面提到的内容-2">上面提到的内容</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Tencent/InjectFix">InjectFix</a> C# 热更新</li>
<li><a target="_blank" rel="noopener" href="https://github.com/0xd4d/dnSpy">dnSpy</a> .Net 反编译编辑器</li>
<li><a target="_blank" rel="noopener" href="https://github.com/jbevain/cecil">Mono.Cecil</a> 基于 IL 分析程序集的库，dnSpy 也是基于这个库来分析的。</li>
</ul>
<h1>自顶向下，再自底向上</h1>
<p>游戏开发很多技术都倚重于硬件的能力，因此我们有必要对这些硬件的实现和原理有所了解。但这方面也是我的弱点，我个人喜欢按照兴趣来学，因此我的总结的方法是：<strong>自顶向下，再自底向上</strong>。</p>
<p>就如上面热更新的例子一般，<strong>自顶向下</strong>就是揭开抽象的面纱，从感兴趣的框架或库的应用入手，逐步通过各种方式来了解底层的原理。</p>
<p>拿 DOTS 技术栈做例子，ECS 的编程模式保证数据线性地排列在内存中，恰好能内存 cache 缓存命中率，从而得到更高效的数据读取。更多细枝末节可以先放一旁，例如 Shared components 这种与理念不相符的共享组件是怎么实现的。</p>
<p>知道了内存 cache 缓存命中率在其中发挥巨大作用后，我刷<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/352847684/answer/889567006">知乎</a>还发现，Disruptor 库为了对齐 128 个字节方便 CPU cache line 用，选择浪费空间提高缓冲命中率。</p>
<p>到底内存的结构是怎么样的？缓存命中率又是什么？字节对齐又是什么？为什么这样的做法能提高性能？带着种种疑问，我们开始<strong>自底向上</strong>地了解内存结构。</p>
<p>从感兴趣的应用入手，了解硬件底层，这样不至于太枯燥。学到一定程度，当我们把知识网中重要的几个概念都了解之后，我们可以再阅读相关操作系统的书，将周边的知识点与之前比较大的概念相连接，互相印证，从而结成结实的知识图谱。</p>
<p>一开始我想重新捡起<a target="_blank" rel="noopener" href="https://book.douban.com/subject/20260928/">《编码：隐匿在计算机软硬件背后的语言》</a>这本书，这本书从手电筒聊天开始，依次讲了摩斯电码、二进制、再到继电器电路、组合成 CPU 等等，能解答我的疑惑，但是后来发现节奏偏慢。于是又看了 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av21376839?p=9">Crash Course Computer Science（计算机科学速成课）</a> 中讲 CPU 的一集，觉得节奏非常好，通过 12 分钟视频讲解除法电路、缓存、流水线设计、并行等概念，揭开计算机一层一层的抽象，我认为这是自底向上最好的教材。另外在知乎刷到一篇文章：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/83449008">《带你深入理解内存对齐最底层原理》</a>也是很好的佐料。</p>
<p>了解了硬件原理之后，这种优化能带到实践中吗？一维数组的顺序访问比逆序访问要快，那么二维数组呢？</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestCache</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">int</span> LINE = <span class="number">10240</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">int</span> COLUMN = <span class="number">10240</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">int</span>[,] array = <span class="keyword">new</span> <span class="built_in">int</span>[LINE, COLUMN];</span><br><span class="line">		Stopwatch stopwatch = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">		stopwatch.Start();</span><br><span class="line">		<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; LINE; i++)  <span class="comment">// 344 ms</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; COLUMN; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				array[i, j] = i + j; <span class="comment">// 一行一行访问</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		stopwatch.Stop();</span><br><span class="line">		Debug.Log(<span class="string">&quot;用时1：&quot;</span> + stopwatch.ElapsedMilliseconds + <span class="string">&quot; ms&quot;</span>); </span><br><span class="line">		stopwatch.Restart();</span><br><span class="line">		<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; LINE; i++) <span class="comment">// 1274 ms</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; COLUMN; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				array[j, i] = i + j; <span class="comment">// 一列一列访问</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		stopwatch.Stop();</span><br><span class="line">		Debug.Log(<span class="string">&quot;用时2：&quot;</span> + stopwatch.ElapsedMilliseconds + <span class="string">&quot; ms&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一行一行访问和一列一列访问的效率很明显不一样，自此，我们自底向上地把对硬件的了解反映到了实际编码中。</p>
<p>由于自己就是兴趣导向的学习，所以学东西难免有所偏科，但是我认为只要感兴趣的够多，就不怕偏科（笑。每个人有自己学习的节奏，在这里只是提供一种思路。</p>
<h2 id="上面提到的内容-3">上面提到的内容</h2>
<ul>
<li><a href="http://frankorz.com/2019/05/07/simple-talk-unity-dots/">《Unity DOTS 走马观花》</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/352847684/answer/889567006">你在开源项目里看到过哪些精髓的代码片段？</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/20260928/">《编码：隐匿在计算机软硬件背后的语言》</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av21376839?p=9">Crash Course Computer Science（计算机科学速成课）</a>第九集：高级 CPU 设计
<ul>
<li>建议空闲的同学从第一集开始看起，内容十分详实有趣。</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/83449008">《带你深入理解内存对齐最底层原理》</a>，其专栏也是个宝藏之地。</li>
</ul>
<h1>找到适合自己的学习方式</h1>
<p>说起来容易，但是要运用之前，我首先需要知道学习这种知识的途径有哪些，才能从中选择最适合自己的学习方式。</p>
<p>拿 Unity 中的渲染来说，我能通过相关官方文档来学，能通过看博文来了解，也能通过 Direct3D、OpenGL 相关教程来学，或者重新拿起图形学的书本，因为都会涉及到渲染流水线的知识。</p>
<p>那么怎么样的才算是适合自己的学习方式呢？有的同学可能喜欢先把理论吃一遍再来实战，我喜欢通过动手来了解。我尝试跟着 LearnOpenGL 教程和一些 Shader 教程来学习渲染管线的知识，也初识 Batch（批次）、GPU Instancing 等名词，但是不同教程都有不同侧重：Shader 教程可能着重教你如何实现各种效果，而图形学课程可能对这些名词的背后实现语焉不详。</p>
<p>之后一直压着疑惑使用着这些技术，我后来又发现了一些选择：要不自己写一套软渲染器？又或者我可以通过 Unity 新出的 Scriptable Render Pipeline（可编程渲染管线）来自定义一套自己的渲染管线？这似乎已经很靠近我想学的东西了，再考虑自己的时间和兴趣，我决定跟着 catlikecoding 的 SRP 教程写一个可编程渲染管线，尝试以一种较底层的角度来了解渲染管线相关的实现。</p>
<h2 id="上面提到的内容-4">上面提到的内容</h2>
<ul>
<li>LearnOpenGL <a target="_blank" rel="noopener" href="https://learnopengl.com/">英文版</a> <a target="_blank" rel="noopener" href="https://learnopengl-cn.github.io/">中文版</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/26821639/">《Unity Shader 入门精要》</a></li>
<li>图形学：<a target="_blank" rel="noopener" href="https://www.scratchapixel.com/">Scratchapixel</a></li>
<li>Scriptable Render Pipeline 可编程渲染管线（目前在学 catlikecoding 的教程）：
<ul>
<li><a target="_blank" rel="noopener" href="https://catlikecoding.com/unity/tutorials/custom-srp/">Custom SRP</a> （Unity 2019 and later）</li>
<li><a target="_blank" rel="noopener" href="https://catlikecoding.com/unity/tutorials/scriptable-render-pipeline/">Scriptable Render Pipeline</a>（Unity 2018）</li>
</ul>
</li>
</ul>
<p>啰嗦了这么多，其实只是想分享下我学习的经验：正所谓曲高和寡，越是进阶的知识点，教程风格越五花八门，当然也会越少人写。每个人有自己的学习风格，尽量多拓展自己的知识来源，不要将自己限制在国内教程和书籍中。</p>
<p>如何扩展知识来源呢？</p>
<ul>
<li>国内外出版社书籍（此处推荐英子姐写的<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI4NTE4MzMwOA==&amp;mid=2651741950&amp;idx=1&amp;sn=1c6401735cfd47a9bb2d59ee2ae5bb2b&amp;chksm=f00ae2ddc77d6bcbc2d36dac9de7bcf4b192a4838369cfd5270451620f056b7ffda4f50f9031&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1575337559586&amp;sharer_shareid=8d96f389de807cb2e9daef47a949d4f8&amp;key=7ded8ce4ce1a7d9e0f5711b5b430edae80ad959ba6b208a010948a08d253c4532e8231c2af04f5331ec4b2ff80034f7f9bb1969dcf727b8823b887f74fa9ef9dac7bdf29681b69880a482c3a30cd8983&amp;ascene=1&amp;uin=MTg1NzQzNDYyMQ%3D%3D&amp;devicetype=Windows+10&amp;version=62070158&amp;lang=zh_CN&amp;pass_ticket=fdAgvNNteCyTRuP%2BDBSnsadU1Thl59Kp5fPRiLirDhI1Tu0z3v40XkHlORu3UAYk">《程序员最喜欢的技术书大都出自这 20 家出版社》</a>）
<ul>
<li><a target="_blank" rel="noopener" href="https://learning.oreilly.com/home/">O’Relly Learning</a> 的书籍分类做的比较好，可以拿来关注新书的出版。</li>
<li>关注国内出版社的书讯</li>
</ul>
</li>
<li>关注 Youtube 博主、博客博主、知乎专栏等（我通过 RSS 订阅）</li>
<li>Github 看有没有人上传自己的 Demo，例如一个<a target="_blank" rel="noopener" href="https://github.com/zhing2006/GPU-Ray-Tracing-in-One-Weekend-by-Unity-2019.3">小型的光线追逐实现</a>、或者一个<a target="_blank" rel="noopener" href="https://github.com/CelestialAmber/Pokemon-Red-Unity">神奇宝贝 Unity 复刻版</a>等。</li>
<li>线下 Meetup 技术分享。</li>
</ul>
<p>有了选择，就可以根据自己兴趣爱好来跟着学习，想办法把他们学到脑子里！</p>
<h1>先写，再优化</h1>
<p>工作后的这段时间我一直在思考，我距离独立造轮子还差多少能力。先写框架划分模块？还是先实现功能？如何写出高内聚低耦合的代码？抛去代码可读性和模块的划分不谈，写出一个轮子最基本的功能对于我可能都是一个难题。</p>
<p>我的工位在写出热更新的大佬的旁边，一开始大佬说招我的原因，是希望我能接受他的热更新框架，继续维护。可惜自己能力不够，看懂了实现，但是却无从下手，之后也就不了了之。不过有段时间，我问大佬问题问到什么程度呢？我一转头瞄下他，他就会划着电脑椅过来等我提问…</p>
<p>大佬在工作室中负责战斗以外的技术攻坚，有需求的话就会主动去学，去实现，C# 热更新框架就是他的作品。后来团队觉得可能要通过帧同步来防外挂，他又开始看相关的论文，文章来从头写，虽然到现在团队还没用上。耳濡目染之下，我也会跟着大佬去看帧同步相关的内容，有时候当当小黄鸭，帮他查漏补缺。</p>
<p>**对于造轮子，有需求，有思路，就先开始写！**这是我这段时间从大佬身上学到的一点。例如他认为我们 UI 的数据不好管理，于是参考了<a target="_blank" rel="noopener" href="https://book.douban.com/subject/27074806/">《Flux 架构》</a>和其他文章，准备将这种理念与 Unity 结合，于是他又开新坑了。</p>
<p>他给我的评价是：知识面较广，好学，就是<strong>不肯开始写</strong>。</p>
<p>说的没错，太多考虑反而会束手束脚，适得其反。先把功能写出来，设计模式按照经验来划分，能用了再优化，这是功利的做法，但也是能让人顾虑少地造轮子的做法。</p>
<h1>新的开始</h1>
<p>工作的节奏和上学完全不一样，虽说是 9.5 6.5 5，但是两个小时的通勤仍然让我措手不及。公司下班吃完饭，回到家九点，随便看点啥就十一点了，早上还得八点多起…</p>
<p><img src="http://img.frankorz.com/daxiong.jpg" alt="daxiong"></p>
<p>最后尝试更换了出行方式，从地铁改成坐巴士上班，这样有位置坐，才能静下心看看书。尽量把阅读安排在通勤时间上，这样才能勉强保持学的进度。</p>
<p>工作方面压力也还行，平常有时间的话能关注下业务逻辑以外的东西。例如有一次运营拿来一个我们游戏的脚本样本，我花了点时间解包，学了学反编译，再让负责战斗的大佬针对性地做了点预防。这个过程对我而言也是新的经验，其中应对 iOS 外挂时借鉴了图灵的<a target="_blank" rel="noopener" href="https://book.douban.com/subject/34658682/">《九阴真经：iOS黑客攻防秘籍》</a>的思路。</p>
<p>前不久转了正，算是给学生时代交了份答卷。随着见识的增长，自己对博文和代码又有了更高的要求。见识了“好”的文章后，自己怎么写才能组织好文章，才能更好地讲述一些知识点？</p>
<blockquote>
<p>我们需要放下书本，去实践，去体验，去观察，去琢磨，去尝试，去创造，去设计，去stay hungry, stay foolish。<br>
<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20576786/answer/29048655">号称终极快速学习法的费曼技巧，究竟是什么样的学习方法？</a></p>
</blockquote>
<p>学习、实践、总结、再清楚地解说一件事，并将其写成博文，这是我对我下一阶段的要求。其中学习总结的速度也得跟上，我已经看到有读者抱怨我博客断更了……</p>
<p>今年读过的书：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30432848/">《Unity3D网络游戏实战（第2版）》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30280467/">《游戏架构：核心技术与面试精粹》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/25843328/">《深入理解C#（第3版）》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30283996/">《利用Python进行数据分析 原书第2版》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30442187/">《白话机器学习算法》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/26806943/">《游戏安全——手游安全技术入门》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/34658682/">《九阴真经：iOS黑客攻防秘籍》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/27135506/">《网络多人游戏架构与编程》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30348061/">《自己动手实现Lua : 虚拟机、编译器和标准库》</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30304759/">《C#从现象到本质》</a></li>
</ul>
<p>明年想更深入多线程、内存布局、和渲染相关的话题。</p>
<p>加油吧，感谢 2019 年帮助过我的所有人。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">猫冬</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://frankorz.com/2019/12/04/2019-year-end-summary/">http://frankorz.com/2019/12/04/2019-year-end-summary/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://frankorz.com" target="_blank">萤火之森</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/">游戏开发</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57e27fcf6e91c81d" async="async"></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgswechat-reward.png" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgswechat-reward.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsalipay-reward.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsalipay-reward.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/01/31/illustrated-csharp-and-performance/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsdefault-cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">《图解 C# 教程 第5版》与性能优化</div></div></a></div><div class="next-post pull-right"><a href="/2019/07/14/clarify-ecs-basic-concept/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsdefault-cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">洞明 Unity ECS 基础概念</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/04/13/2020-04-tech-reading/" title="2020年4月技术导读"><img class="cover" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsdefault-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-13</div><div class="title">2020年4月技术导读</div></div></a></div><div><a href="/2020/05/23/2020-05-tech-reading/" title="2020年5月技术导读"><img class="cover" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsdefault-cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-05-23</div><div class="title">2020年5月技术导读</div></div></a></div><div><a href="/2020/10/03/add-note-section-to-blog/" title="博客新增公开笔记部分"><img class="cover" src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsadd-note-section-to-blog-cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-03</div><div class="title">博客新增公开笔记部分</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgshead.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">猫冬</div><div class="author-info__description">各种知识火种~</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Latias94"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Latias94" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:superfrankie621@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://weibo.com/u/1825527674" target="_blank" title="Weibo"><i class="fab fa-weibo"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到萤火之森🐈</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">毕业</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">从面试到工作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%91%A8"><span class="toc-number">2.1.</span> <span class="toc-text">第一周</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%91%A8"><span class="toc-number">2.2.</span> <span class="toc-text">第二周</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">2.3.</span> <span class="toc-text">上面提到的内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">了解代码的另一面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84%E5%86%85%E5%AE%B9-2"><span class="toc-number">3.1.</span> <span class="toc-text">上面提到的内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">自顶向下，再自底向上</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84%E5%86%85%E5%AE%B9-3"><span class="toc-number">4.1.</span> <span class="toc-text">上面提到的内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">找到适合自己的学习方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84%E5%86%85%E5%AE%B9-4"><span class="toc-number">5.1.</span> <span class="toc-text">上面提到的内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">先写，再优化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">新的开始</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/18/rust-study-resource/" title="Rust 学习资源"><img src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsrust-study-resource-cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 学习资源"/></a><div class="content"><a class="title" href="/2022/01/18/rust-study-resource/" title="Rust 学习资源">Rust 学习资源</a><time datetime="2022-01-18T14:01:44.000Z" title="发表于 2022-01-18 14:01:44">2022-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/05/rust-raytrace/" title="用 Rust 实现简单的光线追踪"><img src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsrust-raytrace-cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用 Rust 实现简单的光线追踪"/></a><div class="content"><a class="title" href="/2021/05/05/rust-raytrace/" title="用 Rust 实现简单的光线追踪">用 Rust 实现简单的光线追踪</a><time datetime="2021-05-05T00:48:30.000Z" title="发表于 2021-05-05 00:48:30">2021-05-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/18/learn-pixel-art/" title="24 天像素画从入门到放弃"><img src="http://img.frankorz.com/day23-dog-in-snow.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="24 天像素画从入门到放弃"/></a><div class="content"><a class="title" href="/2021/04/18/learn-pixel-art/" title="24 天像素画从入门到放弃">24 天像素画从入门到放弃</a><time datetime="2021-04-18T12:33:30.000Z" title="发表于 2021-04-18 12:33:30">2021-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/17/compute-shader/" title="Compute Shader 简介"><img src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgscompute-shader-cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Compute Shader 简介"/></a><div class="content"><a class="title" href="/2021/04/17/compute-shader/" title="Compute Shader 简介">Compute Shader 简介</a><time datetime="2021-04-17T22:14:30.000Z" title="发表于 2021-04-17 22:14:30">2021-04-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/10/03/add-note-section-to-blog/" title="博客新增公开笔记部分"><img src="https://cdn.jsdelivr.net/gh/latias94/blog-images@main/top/frankorz/blog/imgsadd-note-section-to-blog-cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客新增公开笔记部分"/></a><div class="content"><a class="title" href="/2020/10/03/add-note-section-to-blog/" title="博客新增公开笔记部分">博客新增公开笔记部分</a><time datetime="2020-10-03T15:53:30.000Z" title="发表于 2020-10-03 15:53:30">2020-10-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 猫冬</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a href="beian.miit.gov.cn"><span>粤ICP备19098175号-1</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'http://frankorz.com/2019/12/04/2019-year-end-summary/'
    this.page.identifier = '2019/12/04/2019-year-end-summary/'
    this.page.title = '2019 年的收获与成长'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://frankorz.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>